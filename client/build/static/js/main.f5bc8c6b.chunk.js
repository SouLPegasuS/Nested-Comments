(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),s=n.n(c),o=n(63),i=n(127),l=n(21),d=n(7),u=n(11),j=n.n(u),m=n(18),b=n(8),p=n(20),h=n.n(p),x=n(2),O=function(){var e=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/users/logout");case 3:window.location="/login",e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"text-center",children:Object(x.jsxs)("nav",{className:"navbar navbar-expand-md navbar-light text-white fixed-top",id:"bar",children:[Object(x.jsx)("button",{type:"button",className:"navbar-toggler","data-toggle":"collapse","data-target":"#navbarCollapse",children:Object(x.jsx)("span",{className:"navbar-toggler-icon",children:" "})}),Object(x.jsx)("div",{className:"collapse navbar-collapse",id:"navbarCollapse",children:Object(x.jsxs)("div",{className:"navbar-nav",children:[Object(x.jsx)(l.b,{to:"/",children:Object(x.jsx)("span",{className:"nav-item nav-link active expand ",children:"Post"})}),Object(x.jsx)(l.b,{to:"/login",children:Object(x.jsx)("span",{className:"nav-item nav-link active expand ",children:"Login"})}),Object(x.jsx)(l.b,{to:"/register",children:Object(x.jsx)("span",{className:"nav-item nav-link active expand ",children:"Register"})}),Object(x.jsx)("span",{style:{cursor:"pointer"},onClick:e,className:"nav-item nav-link active expand",children:"Logout"})]})})]})})},v=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(b.a)(c,2),o=s[0],i=s[1],d=Object(a.useState)(""),u=Object(b.a)(d,2),p=u[0],v=u[1],f=function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n&&""!==o){e.next=3;break}return v("Incorrect username or password"),e.abrupt("return");case 3:return t={username:n,password:o},e.next=6,h.a.post("/users/login",t).then((function(e){201===e.data.status?window.location="/":v("Incorrect username or password")})).catch((function(e){console.log(e),v("Incorrect username or password")}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)(O,{}),Object(x.jsxs)("div",{className:"text-center up user-container",children:[Object(x.jsx)("h2",{className:"mt-5",children:" Login to Your Account "}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"email",value:n,onChange:function(e){return r(e.target.value)},placeholder:"Username",autoComplete:"off",style:{width:"300px"},className:"mt-3 pt-2 pb-2 pr-2 pl-2",required:!0})}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"password",value:o,onChange:function(e){return i(e.target.value)},placeholder:"Password",style:{width:"300px"},className:"mt-3 pt-2 pb-2 pr-2 pl-2",required:!0})}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){return f()},className:"btn btn-dark mt-3 mb-3",children:" Login "})}),Object(x.jsx)("h4",{children:" OR "}),Object(x.jsx)("div",{children:Object(x.jsx)(l.b,{to:"/register",children:Object(x.jsx)("span",{className:"btn btn-dark mt-3",children:"Register"})})}),Object(x.jsx)("div",{className:"mt-3",children:Object(x.jsxs)("p",{children:[" ",p," "]})})]})]})},f=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(b.a)(c,2),o=s[0],i=s[1],d=Object(a.useState)(""),u=Object(b.a)(d,2),p=u[0],v=u[1],f=function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n&&""!==o){e.next=3;break}return v("Username or password cannot be empty"),e.abrupt("return");case 3:return t={username:n,password:o},e.next=6,h.a.post("/users/register",t).then((function(e){201===e.data.status?window.location="/":409===e.data.status?v("Username is already registered"):v("Incorrect username or password")})).catch((function(e){console.log(e),v("Incorrect username or password")}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)(O,{}),Object(x.jsxs)("div",{className:"text-center up user-container",children:[Object(x.jsx)("h2",{className:"mt-5",children:" Register Your Account "}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"email",value:n,onChange:function(e){return r(e.target.value)},placeholder:"Username",autoComplete:"off",style:{width:"300px"},className:"mt-3 pt-2 pb-2 pr-2 pl-2",required:!0})}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"password",value:o,onChange:function(e){return i(e.target.value)},placeholder:"Password",style:{width:"300px"},className:"mt-3 pt-2 pb-2 pr-2 pl-2",required:!0})}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){return f()},className:"btn btn-dark mt-3 mb-3",children:" Register "})}),Object(x.jsx)("h4",{children:" OR "}),Object(x.jsx)("div",{children:Object(x.jsx)(l.b,{to:"/login",children:Object(x.jsx)("span",{className:"btn btn-dark mt-3",children:"Login"})})}),Object(x.jsx)("div",{className:"mt-3",children:Object(x.jsxs)("p",{children:[" ",p," "]})})]})]})},g=n(57),y=n(130),w=n(123),k=n(124),N=n(38),C=n(125),S=n(126),L=n(129),R=n(128),T=n(121),D=n(122),I=n(4),z=function(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),o=Object(b.a)(s,2),i=o[0],l=o[1],d=Object(a.useState)(""),u=Object(b.a)(d,2),j=u[0],m=u[1],p=Object(a.useState)(""),h=Object(b.a)(p,2),O=h[0],v=h[1],f=e.commentData,g=new Date(f.postedDate).toLocaleString(),y={backgroundColor:"#ff0050",margin:"5px 0 0 5px",lineHeight:"1",color:"#000000",marginBottom:"0.5rem"},w=10*(f.depth-1)+"%";return Object(x.jsxs)("div",{className:"single-comment",style:{marginLeft:w},children:[Object(x.jsxs)("div",{className:"comment-header",children:[Object(x.jsxs)(N.a,{style:{float:"left",color:"#999999"},variant:"body1",component:"p",children:[f.author.name,":"]}),Object(x.jsx)(N.a,{style:{float:"right",color:"#999999"},variant:"body1",component:"p",children:g})]}),Object(x.jsxs)("div",{className:"comment-content",children:[r?Object(x.jsx)(R.a,{value:O,multiline:!0,rowsMin:"1",maxRows:"3",placeholder:"Type your comment...",style:{width:"100%",color:"white"},onChange:function(e){v(e.target.value)}}):Object(x.jsx)(N.a,{className:"comment-text",variant:"body1",component:"p",children:f.commentText}),Object(x.jsxs)("div",{className:"comment-actions",children:[e.isLogged&&f.author.id===e.userData.id?Object(x.jsx)(T.a,{size:"small",color:"primary",variant:"contained",style:{backgroundColor:"#ff0050",color:"#000000"},onClick:r?function(){return function(t){var n={id:t._id,commentText:O};e.updateComment(n),c(!1),v("")}(f)}:function(){return e=f.commentText,c(!0),void v(e);var e},children:r?"Save":"Edit"}):"",Object(x.jsx)(T.a,{size:"small",disabled:f.depth>(r?6:5),color:"primary",variant:"contained",style:{backgroundColor:"#ff0050",color:"#000000"},onClick:r?function(){c(!1),v("")}:function(){l(!0)},children:r?"Cancel":"Reply"})]})]}),i?Object(x.jsxs)("div",{className:"reply-input",children:[Object(x.jsx)(R.a,{value:j,multiline:!0,rowsMin:"1",maxRows:"3",disabled:!e.isLogged,placeholder:e.isLogged?"Type your reply...":"Login to comment",style:{width:"100%",color:"white"},onChange:function(e){m(e.target.value)}}),Object(x.jsxs)("div",{className:"comment-action",children:[Object(x.jsx)(T.a,{disabled:!e.isLogged,size:"small",color:"primary",variant:"contained",style:y,onClick:function(){return t=f,e.addComment(!0,t,j),l(!1),void m("");var t},children:"Submit"}),Object(x.jsx)(T.a,{size:"small",color:"primary",variant:"contained",style:y,onClick:function(){l(!1),m("")},children:"Cancel"})]})]}):""]})},M=Object(D.a)((function(e){return{root:{maxWidth:"100%",backgroundColor:"#181818",color:"white"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})}}})),P=function(){var e=M(),t=r.a.useState(!1),n=Object(b.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)([]),i=Object(b.a)(o,2),l=i[0],d=i[1],u=Object(a.useState)(!1),p=Object(b.a)(u,2),v=p[0],f=p[1],D=Object(a.useState)({}),P=Object(b.a)(D,2),_=P[0],q=P[1],E=Object(a.useState)(""),U=Object(b.a)(E,2),A=U[0],B=U[1],F=function(){var e=Object(m.a)(j.a.mark((function e(t){var n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in n=function e(t,n){var a={_id:t._id,author:{id:t.author.id,name:t.author.name},commentText:t.commentText,depth:t.depth,parentId:t.parentId,postedDate:t.postedDate};for(var r in n.push(a),t.children)e(t.children[r],n)},a=[],t)n(t[r],a);d(a),B("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){(function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/comments/get").then((function(e){q(e.data.user),null===e.data.user?f(!1):f(!0),F(e.data.comments)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var Y=function(){var e=Object(m.a)(j.a.mark((function e(){var t,n,a,r,c=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]&&c[0],n=c.length>1&&void 0!==c[1]?c[1]:null,a=c.length>2&&void 0!==c[2]?c[2]:null,!1!==t||""!==A){e.next=5;break}return e.abrupt("return");case 5:if(!t||""!==a){e.next=7;break}return e.abrupt("return");case 7:return r={id:_.id,name:_.name,commentText:t?a:A},t&&(r.parentId=n._id,r.depth=n.depth+1),e.next=11,h.a.post("/comments/add",r).then((function(e){q(e.data.user),null===e.data.user?f(!1):f(!0),F(e.data.comments)})).catch((function(e){console.log(e)}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/comments/edit",t).then((function(e){q(e.data.user),null===e.data.user?f(!1):f(!0),F(e.data.comments)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)(O,{}),Object(x.jsxs)(y.a,{className:e.root,children:[Object(x.jsx)(w.a,{className:"text-center",title:"Dummy Post. Please Login to comment"}),Object(x.jsx)(k.a,{className:"text-center",children:Object(x.jsx)(N.a,{variant:"h6",component:"p",children:"This is a dummy post. First Register as a new user or login in your existing account to add comments or replies. Once logged in you can also edit comments and replies added by you. You will remain logged in for maximum 3 hours after which cookie containing your auth tokwn will expire. I have implemented Deapth First Traversal Graph algorithm to get comments from MongoDB and render in React component. Have fun :)"})}),Object(x.jsx)(C.a,{disableSpacing:!0,children:Object(x.jsx)(S.a,{className:Object(I.a)(e.expand,Object(g.a)({},e.expandOpen,c)),onClick:function(){s(!c)},"aria-expanded":c,"aria-label":"show more",children:Object(x.jsx)(N.a,{style:{color:"#999999"},variant:"body1",component:"p",children:"Comments"})})}),Object(x.jsx)(L.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(x.jsxs)(k.a,{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)(R.a,{value:A,disabled:!v,multiline:!0,rowsMin:"1",maxRows:"3",placeholder:v?"Type your comment...":"Login to comment",style:{width:"100%",color:"white"},onChange:function(e){B(e.target.value)}}),Object(x.jsx)(T.a,{size:"small",disabled:!v,color:"primary",variant:"contained",style:{backgroundColor:"#ff0050",marginTop:"1%",color:"black"},onClick:function(){return Y(!1,null,null)},children:"Submit"})]}),Object(x.jsx)("div",{children:l.map((function(e,t){return Object(x.jsx)(z,{id:e._id,addComment:Y,updateComment:H,commentData:e,userData:_,isLogged:v},t)}))})]})})]})]})},_=function(){return Object(x.jsx)(l.a,{children:Object(x.jsxs)(d.c,{children:[Object(x.jsx)(d.a,{exact:!0,path:"/",component:P}),Object(x.jsx)(d.a,{exact:!0,path:"/login",component:v}),Object(x.jsx)(d.a,{exact:!0,path:"/register",component:f})]})})},q=Object(o.a)({typography:{fontFamily:['"Montserrat Alternates"',"sans-serif"].join(",")}});s.a.render(Object(x.jsx)(i.a,{theme:q,children:Object(x.jsx)(_,{})}),document.getElementById("root"))}},[[102,1,2]]]);
//# sourceMappingURL=main.f5bc8c6b.chunk.js.map